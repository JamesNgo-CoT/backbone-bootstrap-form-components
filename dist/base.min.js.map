{"version":3,"sources":["base.min.js"],"names":["_typeof","Symbol","iterator","obj","constructor","prototype","_toConsumableArray","arr","Array","isArray","i","arr2","length","from","_defineProperty","key","value","Object","defineProperty","enumerable","configurable","writable","Backbone","Model","Base","extend","attributeTypes","get","attr","opts","recursive","segs","_attr","split","shift","val","this","isModel","hasOwnProperty","Collection","join","index","at","reduce","o","call","set","arguments","k","args","Function","bind","apply","String","concat","valueOf","_args","_args2","_args3","toJSON","json","deep","model","View"],"mappings":"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","file":"base.min.js","sourcesContent":["'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/* global Backbone */\n\n////////////////////////////////////////////////////////////////////////////////\n\nBackbone.Model.Base = Backbone.Model.extend({\n  attributeTypes: {},\n\n  get: function get(attr, opts) {\n    if (opts.recursive === true) {\n      var segs = _attr.split(/(\\[|\\]|\\.)+/);\n      var _attr = segs.shift();\n      var val = this.get(_attr, { recursive: false });\n\n      var isModel = false;\n      if (this.attributeTypes.hasOwnProperty(_attr) && this.attributeTypes[_attr] && typeof this.attributeTypes[_attr] === 'function' && ((isModel = this.attributeTypes[_attr] === Backbone.Model.Base || this.attributeTypes[_attr].prototype instanceof Backbone.Model.Base) || this.attributeTypes[_attr] === Backbone.Collection || this.attributeTypes[_attr].prototype instanceof Backbone.Collection) && val instanceof this.attributeTypes[_attr]) {\n\n        if (isModel) {\n          if (segs.length > 0) {\n            return val.get(segs.join('.'), { recursive: true });\n          }\n        } else {\n          if (segs.length > 0) {\n            var index = +segs.shift();\n            if (segs.length > 0) {\n              return val.at(index).get(segs.join('.'), { recursive: true });\n            }\n          }\n        }\n      }\n\n      if (segs.length > 0) {\n        return segs.reduce(function (o, i) {\n          return o[Array.isArray(o) ? +i : i];\n        }, val);\n      }\n\n      return val;\n    } else {\n      return Backbone.Model.prototype.get.call(this, attr);\n    }\n  },\n\n  set: function set(attr, opts) {\n    if (typeof attr === 'string') {\n      attr = _defineProperty({}, attr, arguments[1]);\n      opts = arguments[2];\n    }\n\n    for (var k in this.attributeTypes) {\n      if (this.attributeTypes.hasOwnProperty(k) && this.attributeTypes[k] && attr.hasOwnProperty(k) && attr[k]) {\n\n        if (typeof this.attributeTypes[k] === 'string' && _typeof(attr[k]) !== this.attributeTypes[k]) {\n          // Primitive types.\n\n          switch (this.attributeTypes[k]) {\n            case 'boolean':\n              {\n                var args = Array.isArray(attr[k]) ? attr[k] : [attr[k]];\n                attr[k] = new (Function.prototype.bind.apply(String, [null].concat(_toConsumableArray(args))))().valueOf();\n              }\n              break;\n\n            case 'number':\n              {\n                var _args = Array.isArray(attr[k]) ? attr[k] : [attr[k]];\n                attr[k] = new (Function.prototype.bind.apply(String, [null].concat(_toConsumableArray(_args))))().valueOf();\n              }\n              break;\n\n            case 'string':\n              {\n                var _args2 = Array.isArray(attr[k]) ? attr[k] : [attr[k]];\n                attr[k] = new (Function.prototype.bind.apply(String, [null].concat(_toConsumableArray(_args2))))().valueOf();\n              }\n              break;\n          }\n        } else if (typeof this.attributeTypes[k] === 'function' && !(attr[k] instanceof this.attributeTypes[k])) {\n          // Object types.\n\n          var _args3 = Array.isArray(attr[k]) ? attr[k] : [attr[k]];\n          attr[k] = new (Function.prototype.bind.apply(this.attributeTypes[k], [null].concat(_toConsumableArray(_args3))))();\n        }\n      }\n    }\n\n    return Backbone.Model.prototype.set.call(this, attr, opts);\n  },\n\n  toJSON: function toJSON(opts) {\n    var json = Backbone.Model.prototype.toJSON.call(this, opts);\n\n    if (opts.deep === true) {\n      for (var k in this.attributeTypes) {\n        var val = this.get(k);\n        if (this.attributeTypes.hasOwnProperty(k) && this.attributeTypes[k] && typeof this.attributeTypes[k] === 'function' && (this.attributeTypes[k] === Backbone.Model || this.attributeTypes[k].prototype instanceof Backbone.Model || this.attributeTypes[k] === Backbone.Collection || this.attributeTypes[k].prototype instanceof Backbone.Collection) && val instanceof this.attributeTypes[k]) {\n\n          json[k] = val.toJSON();\n        }\n      }\n    }\n\n    return json;\n  }\n});\n\n////////////////////////////////////////////////////////////////////////////////\n\nBackbone.Collection.Base = Backbone.Collection.extend({\n  model: Backbone.Model.Base\n});\n\n////////////////////////////////////////////////////////////////////////////////\n\nBackbone.View.Base = Backbone.View.extend({});"]}